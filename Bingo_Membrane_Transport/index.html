<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membrane Transport Bingo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .bingoTable {
            border-collapse: collapse;
            margin: 20px auto;
        }

        .bingoTable td {
            border: 1px solid #000;
            padding: 0;
            text-align: center;
            width: 120px;
            height: 120px;
        }

        .marked {
            background-color: yellow;
        }

        #bingoContainer {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }

        #modeButtons {
            text-align: center;
            margin-bottom: 20px;
        }

        .modeButton {
            padding: 10px 20px;
            margin: 0 10px;
            cursor: pointer;
            border: none;
        }

        .selected {
            background-color: blue;
            color: white;
        }

        .unselected {
            background-color: gray;
            color: black;
        }

        video,
        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #bingoContainer {
            max-width: 90vw;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        #bingoContainer > div {
            display: flex;
            margin: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        #bingoContainer table {
            margin: 10px;
        }
    </style>
</head>

<body>
    <h1 style="text-align: center;">Membrane Transport Bingo</h1>
    <div id="modeButtons">
        <button id="basicButton" class="modeButton selected">Basic</button>
        <button id="challengeButton" class="modeButton unselected">Challenge</button>
    </div>
    <div id="bingoContainer"></div>

    <script>
        const termsAndResources = [
            { term: "Diffusion" },
            { term: "Channel Protein" },
            { term: "Selective Permeability", resource: "https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Selective_Permeability.mp4", type: "video" },
            { term: "Endocytosis", resource: "https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Endocytosis.mp4", type: "video" },
            { term: "Phagocytosis" },
            { term: "Vesicle Transport" },
            { term: "Aquaporin" },
            { term: "Phospholipid", resource: "https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Cell_Membrane.png", type: "image" },
            { term: "Active Transport" },
            { term: "ATP", resource: "https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/ATP.png", type: "image" },
            { term: "Concentration Gradient", resource: "https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Concentration_Gradient.png", type: "image" },
            { term: "Facilitated Diffusion" },
            { term: "Passive Transport" },
            { term: "Osmosis", resource: "https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Osmosis.mp4", type: "video" }
        ];

        // Ensure enough terms/resources to fill all cells
        while (termsAndResources.length < 25) {
            termsAndResources.push(...termsAndResources);
        }
        termsAndResources.length = 25; // Ensure exactly 25 items

        // Function to create bingo boards
        const generateUniqueBoard = (id) => {
            const table = document.getElementById(id);
            const cells = Array.from(table.getElementsByTagName('td'));

            shuffle(termsAndResources);

            cells.forEach((cell, index) => {
                cell.style.backgroundColor = "";
                cell.classList.remove("marked");

                const item = termsAndResources[index];
                cell.innerHTML = ""; // Clear any existing content

                if (item.resource) {
                    const shouldShowTerm = Math.random() < 0.5;
                    if (shouldShowTerm) {
                        cell.textContent = item.term;
                    } else {
                        if (item.type === "video") {
                            const video = document.createElement("video");
                            video.src = item.resource;
                            video.loop = true;
                            video.autoplay = true;
                            video.muted = true;
                            cell.appendChild(video);
                        } else if (item.type === "image") {
                            const img = document.createElement("img");
                            img.src = item.resource;
                            cell.appendChild(img);
                        }
                    }
                } else {
                    cell.textContent = item.term;
                }

                cell.onclick = () => {
                    cell.classList.toggle("marked");
                    checkBingo(cells);
                };
            });
        };

        // Shuffle function
        const shuffle = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        };

        // Function to create the bingo table
        const createTable = (id) => {
            const table = document.createElement('table');
            table.id = id;
            table.className = 'bingoTable';

            for (let i = 0; i < 5; i++) {
                const row = table.insertRow();
                for (let j = 0; j < 5; j++) {
                    const cell = row.insertCell();
                }
            }
            return table;
        };

        // Event listeners for mode switching
        document.getElementById('basicButton').addEventListener('click', () => setMode('Basic'));
        document.getElementById('challengeButton').addEventListener('click', () => setMode('Challenge'));

        // Set mode function
        const setMode = (newMode) => {
            const container = document.getElementById('bingoContainer');
            container.innerHTML = '';

            if (newMode === 'Basic') {
                container.appendChild(createTable('bingoTable'));
                generateUniqueBoard('bingoTable');
                document.getElementById('basicButton').classList.add('selected');
                document.getElementById('basicButton').classList.remove('unselected');
                document.getElementById('challengeButton').classList.add('unselected');
                document.getElementById('challengeButton').classList.remove('selected');
            } else {
                const boardContainer = document.createElement("div");
                boardContainer.style.display = "flex";
                boardContainer.style.justifyContent = "center";

                const board1 = createTable('bingoTable1');
                const board2 = createTable('bingoTable2');

                boardContainer.appendChild(board1);
                boardContainer.appendChild(board2);

                container.appendChild(boardContainer);

                generateUniqueBoard('bingoTable1');
                generateUniqueBoard('bingoTable2');
                document.getElementById('basicButton').classList.add('unselected');
                document.getElementById('basicButton').classList.remove('selected');
                document.getElementById('challengeButton').classList.add('selected');
                document.getElementById('challengeButton').classList.remove('unselected');
            }
        };

        // Initial load
        setMode('Basic');
    </script>
</body>

</html>
