<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membrane Transport Bingo</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 0; }
        .bingoTable { border-collapse: collapse; margin: 20px auto; perspective: 1000px; }
        .bingoTable td { border: 1px solid #000; text-align: center; width: 150px; height: 150px; position: relative; }
        .flip-container { width: 100%; height: 100%; position: absolute; transition: transform 0.6s; transform-style: preserve-3d; }
        .flip-container.flipped { transform: rotateY(180deg); }
        .flip-front, .flip-back { width: 100%; height: 100%; position: absolute; backface-visibility: hidden; }
        .flip-back { transform: rotateY(180deg); }
        .marked { background-color: yellow; }
        .blink { animation: blink-animation 1s steps(2, start) infinite; }
        @keyframes blink-animation { to { visibility: hidden; } }
        #bingoContainer { display: flex; justify-content: center; flex-wrap: wrap; margin-top: 20px; }
        #modeButtons { text-align: center; margin-bottom: 20px; }
        .modeButton { padding: 10px 20px; margin: 0 10px; cursor: pointer; border: none; }
        .selected { background-color: blue; color: white; }
        .unselected { background-color: gray; color: black; }
    </style>
</head>
<body>
    <h1>Membrane Transport Bingo</h1>
    <div id="modeButtons">
        <button id="basicButton" class="modeButton selected">Basic</button>
        <button id="challengeButton" class="modeButton unselected">Challenge</button>
        <button id="soloTermsButton" class="modeButton unselected">Solo - Terms</button>
        <button id="soloDefinitionsButton" class="modeButton unselected">Solo - Definitions</button>
    </div>
    <div id="messageContainer" style="display: none; margin-bottom: 20px;">
        <p>Click each cell to show its answer.</p>
    </div>
    <div id="bingoContainer"></div>
    <script>
        const terms = [
            "Diffusion", "Facilitated Diffusion", "Active Transport", "Endocytosis", "Exocytosis", 
            "Channel Protein", "Carrier Protein", "ATP", "Phospholipid Bilayer", "Pinocytosis", "Passive Transport", 
            "Energy Requirement", "Concentration Gradient", "Equilibrium", "Selective Permeability", 
            "Aquaporin", "Phagocytosis", "Vesicle Transport", "Osmosis"
        ];

        const definitions = {
            "Diffusion": "Movement of particles from high to low concentration.",
            "Facilitated Diffusion": "Movement across membrane via transport proteins.",
            "Active Transport": "Energy-required transport against concentration gradient.",
            // Add definitions for all terms...
        };

        const termMedia = {
            "Osmosis": "<video src='https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Osmosis.mp4' style='width: 100%; height: 100%; object-fit: cover;' autoplay loop muted></video>",
            "Phospholipid Bilayer": "<img src='https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Phospholipid%20Bilayer.png' style='width: 100%; height: 100%; object-fit: cover;' />",
            "ATP": "<img src='https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/ATP.png' style='width: 100%; height: 100%; object-fit: cover;' />",
            "Endocytosis": "<video src='https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Endocytosis.mp4' style='width: 100%; height: 100%; object-fit: cover;' autoplay loop muted></video>",
            "Exocytosis": "<video src='https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Exocytosis.mp4' style='width: 100%; height: 100%; object-fit: cover;' autoplay loop muted></video>",
            "Selective Permeability": "<video src='https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Selective%20Permeability.mp4' style='width: 100%; height: 100%; object-fit: cover;' autoplay loop muted></video>",
            "Concentration Gradient": "<img src='https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Concentration%20Gradient.png' style='width: 100%; height: 100%; object-fit: contain;' />"
        };

        const fillBingoBoard = (terms) => {
            const board = [...terms];
            while (board.length < 25) {
                const remainingTerms = terms.filter(term => board.filter(t => t === term).length < 2);
                shuffle(remainingTerms);
                for (let term of remainingTerms) {
                    if (board.length < 25) board.push(term);
                }
            }
            return board;
        };

        const shuffle = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        };

        let mode = 'Basic';
        let selectedColor;

        const generateUniqueBoard = (id, showDefinitions = false, soloMode = false) => {
            const table = document.getElementById(id);
            const cells = Array.from(table.getElementsByTagName('td'));

            const filledTerms = fillBingoBoard(terms);
            shuffle(filledTerms);

            cells.forEach((cell, index) => {
                const term = filledTerms[index];
                let frontContent, backContent;

                if (termMedia[term]) {
                    frontContent = termMedia[term];
                    backContent = showDefinitions ? definitions[term] || term : term;
                } else {
                    frontContent = showDefinitions ? definitions[term] || term : term;
                    backContent = showDefinitions ? term : definitions[term] || term;
                }

                if (soloMode) {
                    cell.innerHTML = `
                        <div class="flip-container">
                            <div class="flip-front">${frontContent}</div>
                            <div class="flip-back">${backContent}</div>
                        </div>
                    `;
                    const flipContainer = cell.querySelector('.flip-container');
                    cell.onclick = () => {
                        flipContainer.classList.toggle('flipped');
                    };
                } else {
                    cell.textContent = frontContent;
                    cell.onclick = () => {
                        if (!cell.classList.contains('marked')) {
                            cell.classList.add('marked');
                            cell.style.backgroundColor = selectedColor;
                        } else {
                            cell.classList.remove('marked');
                            cell.style.backgroundColor = "";
                        }
                        checkBingo(cells);
                    };
                }
            });
        };

        const setMode = (newMode) => {
            mode = newMode;
            const container = document.getElementById('bingoContainer');
            container.innerHTML = '';
            document.getElementById('messageContainer').style.display = 'none';

            if (mode === 'Basic') {
                container.appendChild(createTable('bingoTable'));
                generateUniqueBoard('bingoTable');
                updateButtonStates('basicButton');
            } else if (mode === 'Challenge') {
                container.style.display = 'grid';
                container.style.gridTemplateColumns = '1fr 1fr';
                const board1 = createTable('bingoTable1');
                const board2 = createTable('bingoTable2');
                container.appendChild(board1);
                container.appendChild(board2);
                generateUniqueBoard('bingoTable1');
                generateUniqueBoard('bingoTable2');
                updateButtonStates('challengeButton');
            } else if (mode === 'Solo - Terms') {
                document.getElementById('messageContainer').style.display = 'block';
                container.appendChild(createTable('bingoTableSolo'));
                generateUniqueBoard('bingoTableSolo', false, true);
                updateButtonStates('soloTermsButton');
            } else if (mode === 'Solo - Definitions') {
                document.getElementById('messageContainer').style.display = 'block';
                container.appendChild(createTable('bingoTableSolo'));
                generateUniqueBoard('bingoTableSolo', true, true);
                updateButtonStates('soloDefinitionsButton');
            }
        };

        const updateButtonStates = (selectedButtonId) => {
            ['basicButton', 'challengeButton', 'soloTermsButton', 'soloDefinitionsButton'].forEach(buttonId => {
                document.getElementById(buttonId).classList.remove('selected');
                document.getElementById(buttonId).classList.add('unselected');
            });
            document.getElementById(selectedButtonId).classList.add('selected');
            document.getElementById(selectedButtonId).classList.remove('unselected');
        };

        const createTable = (id) => {
            const table = document.createElement('table');
            table.id = id;
            table.className = 'bingoTable';

            for (let i = 0; i < 5; i++) {
                const row = table.insertRow();
                for (let j = 0; j < 5; j++) {
                    const cell = row.insertCell();
                    cell.className = 'bingo-cell';
                }
            }
            return table;
        };

        document.getElementById('basicButton').addEventListener('click', () => setMode('Basic'));
        document.getElementById('challengeButton').addEventListener('click', () => setMode('Challenge'));
        document.getElementById('soloTermsButton').addEventListener('click', () => setMode('Solo - Terms'));
        document.getElementById('soloDefinitionsButton').addEventListener('click', () => setMode('Solo - Definitions'));

        setMode('Basic');
    </script>
</body>
</html>
