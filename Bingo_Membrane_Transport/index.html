<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Membrane Transport Bingo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        .bingoTable {
            border-collapse: collapse;
            margin: 20px auto;
        }

        .bingoTable td {
            border: 1px solid #000;
            text-align: center;
            width: 150px;
            height: 150px;
            position: relative;
            perspective: 1000px;
        }

        .flip-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .flipper {
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
        }

        .front,
        .back {
            backface-visibility: hidden;
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back {
            transform: rotateY(180deg);
        }

        .flip-container.flipped .flipper {
            transform: rotateY(180deg);
        }

        .marked {
            background-color: yellow;
        }

        .blink {
            animation: blink-animation 1s steps(2, start) infinite;
        }

        @keyframes blink-animation {
            to {
                visibility: hidden;
            }
        }

        #bingoContainer {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        #modeButtons {
            text-align: center;
            margin-bottom: 20px;
        }

        .modeButton {
            padding: 10px 20px;
            margin: 0 10px;
            cursor: pointer;
            border: none;
        }

        .selected {
            background-color: blue;
            color: white;
        }

        .unselected {
            background-color: gray;
            color: black;
        }

        #message {
            margin-bottom: 20px;
            font-size: 18px;
        }
    </style>
</head>

<body>
    <h1>Membrane Transport Bingo</h1>
    <div id="modeButtons">
        <button id="basicButton" class="modeButton selected">Basic</button>
        <button id="challengeButton" class="modeButton unselected">Challenge</button>
        <button id="soloTermsButton" class="modeButton unselected">Solo - Terms</button>
        <button id="soloDefinitionsButton" class="modeButton unselected">Solo - Definitions</button>
    </div>
    <div id="message"></div>
    <div id="bingoContainer"></div>
    <script>
        const terms = [
            "Diffusion", "Facilitated Diffusion", "Active Transport", "Endocytosis", "Exocytosis",
            "Channel Protein", "Carrier Protein", "ATP", "Phospholipid Bilayer", "Pinocytosis", "Passive Transport",
            "Energy Requirement", "Concentration Gradient", "Equilibrium", "Selective Permeability",
            "Aquaporin", "Phagocytosis", "Vesicle Transport", "Osmosis"
        ];

        const termDefinitions = {
            "Diffusion": "The movement of particles from an area of high concentration to an area of low concentration.",
            "Facilitated Diffusion": "The process of passive transport of molecules across a membrane via a transport protein.",
            "Active Transport": "The movement of substances against the concentration gradient using energy (ATP).",
            // Add all other definitions here...
        };

        const termMedia = {
            "Osmosis": "<video src='https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Osmosis.mp4' style='width: 100%; height: 100%; object-fit: cover;' autoplay loop muted></video>",
            "Phospholipid Bilayer": "<img src='https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/Phospholipid%20Bilayer.png' style='width: 100%; height: 100%; object-fit: cover;' />",
            "ATP": "<img src='https://joelafort.github.io/BioAnimations/Bingo_Membrane_Transport/ATP.png' style='width: 100%; height: 100%; object-fit: cover;' />",
            // Add all other media here...
        };

        let mode = 'Basic';

        const stopAudio = () => {
            // Your audio stop logic
        };

        const setMode = (newMode) => {
            stopAudio();
            mode = newMode;
            const container = document.getElementById('bingoContainer');
            container.innerHTML = '';
            const message = document.getElementById('message');
            message.textContent = '';

            document.querySelectorAll('.modeButton').forEach(button => {
                button.classList.add('unselected');
                button.classList.remove('selected');
            });

            document.getElementById(`${newMode.toLowerCase()}Button`).classList.add('selected');

            if (mode === 'Basic') {
                setupBasicBoard();
            } else if (mode === 'Challenge') {
                setupChallengeBoard();
            } else if (mode === 'SoloTerms') {
                message.textContent = 'Click each cell to show its answer.';
                setupSoloBoard('terms');
            } else if (mode === 'SoloDefinitions') {
                message.textContent = 'Click each cell to show its answer.';
                setupSoloBoard('definitions');
            }
        };

        const setupBasicBoard = () => {
            const table = createTable('bingoTable');
            document.getElementById('bingoContainer').appendChild(table);
            generateUniqueBoard('bingoTable');
        };

        const setupChallengeBoard = () => {
            // Existing logic for challenge mode
        };

        const setupSoloBoard = (type) => {
            const table = createTable('bingoTable');
            document.getElementById('bingoContainer').appendChild(table);
            const cells = Array.from(table.getElementsByTagName('td'));
            shuffle(terms);
            cells.forEach((cell, index) => {
                const term = terms[index];
                const frontContent = (type === 'terms') ? term : termDefinitions[term];
                const backContent = (type === 'terms') ? termDefinitions[term] : term;

                cell.innerHTML = `
                    <div class="flip-container">
                        <div class="flipper">
                            <div class="front">${frontContent}</div>
                            <div class="back">${backContent}</div>
                        </div>
                    </div>
                `;

                cell.addEventListener('click', () => {
                    cell.querySelector('.flip-container').classList.toggle('flipped');
                });
            });
        };

        const shuffle = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        };

        const createTable = (id) => {
            const table = document.createElement('table');
            table.id = id;
            table.className = 'bingoTable';
            for (let i = 0; i < 5; i++) {
                const row = table.insertRow();
                for (let j = 0; j < 5; j++) {
                    const cell = row.insertCell();
                    cell.className = 'bingo-cell';
                }
            }
            return table;
        };

        document.getElementById('basicButton').addEventListener('click', () => setMode('Basic'));
        document.getElementById('challengeButton').addEventListener('click', () => setMode('Challenge'));
        document.getElementById('soloTermsButton').addEventListener('click', () => setMode('SoloTerms'));
        document.getElementById('soloDefinitionsButton').addEventListener('click', () => setMode('SoloDefinitions'));

        setMode('Basic');

        window.addEventListener('beforeunload', stopAudio);
    </script>
</body>

</html>
